/*! Milanoo 2015-05-05 */
define("base",function(a,b){b.now=function(){return(new Date).getTime()},b.uid=function(a,b){for(var c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"+(new Date).getTime(),b=b||12,d=[],e=0;b>e;e++)d.push(c.charAt(Math.floor(Math.random()*c.length)));return(void 0!==a?a+"-":"")+d.join("")},b.listen={_t:null,resize:function(a){clearTimeout(this._t),this._t=setTimeout(function(){$(window).resize(function(){a()})},79)}},b.page={screen:{width:function(){return $(window).width()+$(window).scrollLeft()},height:function(){return $(window).height()+$(window).scrollTop()}}},b.chars={toJson:function(a){for(var b={},c=a.split(";"),d=0;d<c.length;d++){var e=c[d].split(":");b[e[0]]=e[1]}return b},toStr:function(a,b,c){var d=[];for(var e in a)d.push(e+(b||":")+a[e]);return d.join(c||";")},strcut:function(a,b,c){if(a.length<=b)return[a];for(var d=[],e=[],f=0,g=0;g<a.length;g++)d.push(a.charAt(g));-1===c&&d.reverse();for(var g=0;g<d.length;g++){if(0!==g&&0==g%b&&(-1===c&&e[f].reverse(),e[f]=e[f].join(""),f++),e[f]||(e[f]=[]),g===d.length-1){e[f].push(d[g]),-1===c&&e[f].reverse(),e[f]=e[f].join("");break}e[f].push(d[g])}return-1===c?e.reverse():e}},b.math={rand:function(a,b){var c=Math.floor(Math.random()*a);return(b||0)+c},"float":function(a,b){var c="number"==typeof a?a:parseFloat(a),d=b||2;return isNaN(c)?null:Math.round(c*Math.pow(10,d))/Math.pow(10,d)}},b.browser={ishtml5:function(){return void 0!==typeof Worker?!0:!1}},b.imgLoader=function(a,b){var c={};$.isPlainObject(a)?c=a:$.isArray(a)||"object"===$.type(a)&&!$.isPlainObject(a)?$.each(a,function(){c[$(this).attr("src")]=this}):"string"==typeof a&&(c[a]=[]);for(var d in c){var e=d,f=new Image;if(f.src=e,f._callback=b,f._orgi=c[d],f.complete)return f._callback.call(f._orgi.length?f._orgi:f,!0),void 0;$(f).load(function(){this._callback.call(this._orgi.length?this._orgi:this,!1)})}},b.handLazy=function(a){$(a).each(function(){var a=$(this).find("img"),b=a.attr("src1")||a.attr("original");a.attr("src"),b&&""!=b&&a.attr("src",b).removeAttr("src1").removeAttr("original")})},b.lazyload=function(a,b){function c(){return(document.body.clientHeight<document.documentElement.clientHeight?document.body.clientHeight:document.documentElement.clientHeight)+Math.max(document.documentElement.scrollTop,document.body.scrollTop)}function d(){e.each(function(){var a=$(this).offset();if(a&&void 0!==this.nodeType&&a.top<=c()+(b||0)){var d=$(this).attr("original");d&&$(this).attr("src",d).removeAttr("original")}})}var e=$(a);d(),$(window).bind("scroll",function(){d()})},b.goto=function(a){var b=null;clearTimeout(b);var c={elem:null,duration:400,yOffset:0};$.extend(c,a),c.elem=$.isPlainObject(a)?$(c.elem):$(a);var d=0,e=$(window).scrollTop(),f=(new Date).getTime(),g=null!==c.elem&&c.elem.length,h=function(a,b,c,d,e){return-d*b*b/(e*e)+2*d*b/e+c};return c.elem&&c.elem.length?(g&&(d=Math.round(c.elem.offset().top)),d+c.yOffset==e?!1:(d=Math.floor(d+c.yOffset),b=setInterval(function(){var a=(new Date).getTime()-f,i=a/c.duration,j=h(i,a,0,1,c.duration);if((new Date).getTime()>f+c.duration)clearInterval(b),b=null,$(window).scrollTop(d);else{var k=(g?j:1-j)*(d-e);$(window).scrollTop(e+k)}},17),void 0)):!1}}),define("droll",function(){var a=function(a,b){this.autoTimer=null,this.target=a,this.opt={step:null,moveNum:null,eventType:"click",isHori:!0,index:0,auto:!1,autoDelay:5e3,speed:500,dirButton:!0,indexButton:!1,relaBtns:null,listCurClass:"pdo-droll_list_current",ibtnCurClass:"pdo-droll_btn_current",lockedClass:"pdo-droll_btn_locked",prevHtml:"&lt;",nextHtml:"&gt;",loop:!0,outerSelector:"ul",itemsSelector:"li",btnHoverActive:!1,onFinished:function(){},onBeforeInView:function(){}},$.extend(this.opt,b),this.LENGTH=0,this.LOCKED=!1,this.I=this.opt.index,this.PREVI=this.opt.index,this.init()};return a.prototype={init:function(){var a=this;return this.LENGTH=$(this.target).find(this.opt.outerSelector).find(this.opt.itemsSelector).length,this.LENGTH<=this.opt.moveNum&&(this.opt.loop=!1),this.printWrapper(),this.setParams(),this.bindEvents(),this.setListState(),this.setDirBtnState(),this.setIndexBtnState(this.opt.index),this.LENGTH<=this.opt.moveNum?(this.opt.onBeforeInView.call(this.target,$(this.target).find(this.opt.outerSelector).find(this.opt.itemsSelector)),void 0):(0!==this.opt.index?this.move():this.opt.onBeforeInView.call(this.target,this.getInViewList()),this.opt.auto&&(this.auto(),$(this.target).hover(function(){clearTimeout(a.autoTimer)},function(){a.auto()})),void 0)},printWrapper:function(){for(var a="",b=$(this.target),c=this.opt.isHori?"width: "+this.opt.step*this.opt.moveNum+"px; height: "+$(this.target).outerHeight()+"px;":"height: "+this.opt.step*this.opt.moveNum+"px; width: "+$(this.target).outerWidth()+"px;",d=0;d<this.LENGTH/this.opt.moveNum;d++)a+='<a href="javascript:void(0);">'+(d+1)+"</a>";b.find(this.opt.outerSelector).wrap('<div style="'+c+'z-index:1;" class="pdo-droll"></div>'),b.find(".pdo-droll").wrap('<div style="'+c+'" class="pdo-droll_layout"></div>'),b.find(".pdo-droll_layout").append('                <div class="pdo-droll_dirbutton" style="display:none;">                    <a class="pdo-droll_prev" href="javascript:void(0);"><span><span></a>                    <a class="pdo-droll_next" href="javascript:void(0);"><span><span></a>                </div>                <div class="pdo-droll_numbutton" style="display:none;">'+a+"</div>            "),this.opt.loop},setParams:function(){var a=$(this.target);this.ELEM={outer:a.find("pdo-droll"),cont:a.find(this.opt.outerSelector),dirbtn:a.find("div.pdo-droll_dirbutton"),numbtn:a.find("div.pdo-droll_numbutton"),prev:a.find("a.pdo-droll_prev"),next:a.find("a.pdo-droll_next")},this.opt.dirButton&&!this.opt.btnHoverActive&&this.ELEM.dirbtn.fadeIn(200),this.opt.indexButton&&this.ELEM.numbtn.fadeIn(200);var b=this.opt.step*this.ELEM.cont.find(this.opt.itemsSelector).length;this.ELEM.cont[this.opt.isHori?"width":"height"](b).css("position","absolute")},bindEvents:function(){var a=this;this.ELEM.prev.click(function(){a.I<=0?a.move((a.LENGTH-1)*a.opt.moveNum):a.move(-1*a.opt.moveNum)}),this.ELEM.next.click(function(){a.move(1*a.opt.moveNum)}),this.opt.btnHoverActive&&(this.target.ha_stimer=null,this.target.ha_htimer=null,$(this.target).hover(function(){clearTimeout(a.target.ha_stimer),clearTimeout(a.target.ha_htimer),a.target.ha_stimer=setTimeout(function(){a.ELEM.dirbtn.fadeIn(120)},100)},function(){clearTimeout(a.target.ha_stimer),clearTimeout(a.target.ha_htimer),a.target.ha_htimer=setTimeout(function(){a.ELEM.dirbtn.fadeOut(120)},100)}),this.ELEM.dirbtn.mouseover(function(){clearTimeout(a.target.ha_stimer),clearTimeout(a.target.ha_htimer)})),this.ELEM.numbtn.find("a")[this.opt.eventType](function(){a.move($(this).index()*a.opt.moveNum-a.I)}),!this.opt.loop&&this.opt.relaBtns&&this.opt.relaBtns[this.opt.eventType](function(){var b=a.ELEM.numbtn.find("a").eq($(this).index());b.triggerHandler(a.opt.eventType)})},move:function(a,b){if(!(this.LENGTH<=this.opt.moveNum||this.LOCKED)){this.LOCKED=!0;var c=this,d=this.getStep(a,b);if(null===d)return this.LOCKED=!1,void 0;this.opt.onBeforeInView.call(this.target,this.getInViewList()),this.setListState(),this.setDirBtnState(),this.setIndexBtnState(Math.abs(d/this.opt.step));var e={};e[this.opt.isHori?"left":"top"]=d,this.ELEM.cont.animate(e,this.opt.speed,function(){c.LOCKED=!1,c.opt.onFinished.call(c.target,c.getInViewList())})}},getStep:function(a){var b=void 0!==a?this.I+a:this.I;if(0>b&&(b=this.opt.loop?this.LENGTH+b-this.opt.moveNum:0),b>this.LENGTH-this.opt.moveNum&&(b=this.opt.loop?0:this.LENGTH-this.opt.moveNum),void 0!==a&&this.I===b)return null;var c=-1*b*this.opt.step;return this.I=b,c},auto:function(){clearTimeout(this.autoTimer);var a=this;this.autoTimer=setTimeout(function(){a.move(1*a.opt.moveNum),a.auto()},this.opt.autoDelay)},getInViewList:function(){for(var a=[],b=this.I;b<this.I+this.opt.moveNum;b++)a.push(this.ELEM.cont.find(this.opt.itemsSelector).eq(b)[0]);return a},setListState:function(){this.ELEM.cont.find(this.opt.itemsSelector).removeClass(this.opt.listCurClass),this.ELEM.cont.find(this.opt.itemsSelector).eq(this.I).addClass(this.opt.listCurClass)},setDirBtnState:function(){this.opt.loop||(this.ELEM.prev.removeClass(this.opt.lockedClass),this.ELEM.next.removeClass(this.opt.lockedClass),this.I<=0&&this.ELEM.prev.addClass(this.opt.lockedClass),this.I>=this.LENGTH-this.opt.moveNum&&this.ELEM.next.addClass(this.opt.lockedClass))},setIndexBtnState:function(a){this.opt.loop;var b=Math.round(a/this.opt.moveNum),c=this.ELEM.numbtn.find("a");c.removeClass(this.opt.ibtnCurClass),c.eq(b).addClass(this.opt.ibtnCurClass),this.opt.relaBtns&&(this.opt.relaBtns.removeClass(this.opt.ibtnCurClass),this.opt.relaBtns.eq(b).addClass(this.opt.ibtnCurClass))}},a}),define(function(a){var b=a("base"),c=a("droll");$(function(){new c($(".store_album")[0],{step:710,moveNum:1,dirButton:!0,loop:!0,indexButton:!1,auto:!0,outerSelector:"div.my_inslide",itemsSelector:"div",onBeforeInView:function(a){$(a).each(function(){var a=$(this).find("img"),b=a.attr("src1")||a.attr("original");a.attr("src"),b&&""!=b&&a.attr("src",b).removeAttr("src1").removeAttr("original")})}}),new c($(".goods_box"),{step:153,moveNum:6,index:0,loop:!0,onBeforeInView:function(a){b.handLazy(a)}})})});