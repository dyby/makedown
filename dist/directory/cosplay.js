/*! Milanoo 2015-05-05 */
define("domsearch",function(){var a=function(a,b){this.target=a,this.opt={dataItem:null,dataSource:null,autoQuick:!0},$.extend(this.opt,b),this.init()};return a.prototype={init:function(){var a=this;this.opt.autoQuick&&this.createQuick(),$(this.target).keyup(function(){var b=a.getMatch($.trim($(this).val()));a.reload(b)})},createQuick:function(){var a=this;$(this.opt.dataItem).each(function(){var b=a.getDataFrom(this),c=a.getText(b);if(c.length&&"string"==typeof c){for(var d="",e=c.split(/\s/),f=0;f<e.length;f++)d+=e[f].charAt(0);b.attr("dom-search-autoquick",d)}})},getMatch:function(a){var b=this,c=[],d=new RegExp("^"+a,"i");return $(this.opt.dataItem).each(function(){var a=b.getDataFrom(this);(d.test(b.getText(a))||d.test(a.attr("dom-search-autoquick")))&&c.push(this)}),c},getDataFrom:function(a){var b=this.opt.dataSource;return b?/^@/.test(b)?$(a):$(a).find(b):$(a)},getText:function(a){var b=this.opt.dataSource;return/^@/.test(b)?a.attr(b.replace(/^@/,"")):a.text()},reload:function(a){$(this.opt.dataItem).not(a).hide(),$(this.opt.dataItem).filter(a).show()}},a}),define("simpleTree",function(){var a=function(a,b){this.elem=a,this.opt={handler:".title",toggleClass:"title_selected",showtarget:"ul",currentClass:".menu-list-current"},$.extend(this.opt,b),this.init()};return a.prototype={init:function(){var a=$(this.elem),b=this;a.find(b.opt.currentClass).parents(b.opt.showtarget).show(),a.find(b.opt.currentClass).parents(b.opt.showtarget).prev().find(b.opt.handler).addClass(b.opt.toggleClass),this.bind()},bind:function(){var a=$(this.elem),b=this;a.find(b.opt.handler).bind("click",function(){b.animate()})},animate:function(){var a=$(this.elem),b=this,c=a.find(b.opt.handler);c.hasClass(b.opt.toggleClass)?c.removeClass(b.opt.toggleClass):c.addClass(b.opt.toggleClass),c.parents().find(a.find(b.opt.showtarget)).animate({height:"toggle"},100)}},a}),define(function(a){var b=a("domsearch"),c=a("simpleTree");$(function(){$(".list_left > dl").each(function(){new c(this,{handler:">dt",toggleClass:"plus",showtarget:"dd"})}),$("#categoriesSearch")&&$("#categoriesSearch").length&&new b($("#categoriesSearch"),{dataItem:$("#categoriesList").find("li"),dataSource:"a"}),$("#cosplay_search_words a").click(function(a){a&&a.preventDefault?a.preventDefault():window.event.returnValue=!1,w_top=$($(this).attr("href")).offset().top,setTimeout(function(){$(window).scrollTop(w_top-30)},100),$("#categoriesSearch").val($(this).text()),$("#categoriesSearch").trigger("keyup")}),$("#categoriesSearch").keyup(function(){var a=$.trim($(this).val());if(a.length){var b=a.charAt(0),c=new RegExp("^"+b,"i");$("#cosplay_search_words").find("a").removeClass("link_now"),$("#cosplay_search_words").find("a").each(function(){c.test($.trim($(this).text()))&&$(this).addClass("link_now")})}else $("#cosplay_search_words").find("a").removeClass("link_now");$(".promotion img").each(function(){var a=$(this).attr("original");a&&$(this).attr("src",a).removeAttr("original")})});var a=$("#cosplay_search_words").offset().top;$(window).scroll(function(){var b=$(window).scrollTop();b>a?$("#cosplay_search_words").css({position:"fixed",top:"0px","margin-top":"0","z-index":"20"}):$("#cosplay_search_words").css({position:"static","margin-top":"10px"})})})});