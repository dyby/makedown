/*! Milanoo 2015-05-05 */
function emailAlertClick(a){Email=jQuery("#nosale_email").val();var b=function(a){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(a)};return b(Email)?(jQuery.ajax({url:root_url+"index.php?module=ajax&action=nosale",type:"GET",data:"&Email="+Email+"&ProductId="+a,timeout:3e4,error:function(){alert("System error!")},success:function(a){a.length>0&&jQuery("#notice_box2").text(a),jQuery("#notice_box2").fadeIn(200),jQuery.fancybox.close(),setTimeout(function(){jQuery("#notice_box2").fadeOut(200)},2e3)}}),void 0):!1}define("main",function(a,b){function c(a){var b=$("#s-custom_sizechart"),c=b.is(":hidden");return-1===a?(b.hide(),$(a).removeClass("unfold").addClass("fold"),void 0):(b[c?"show":"hide"](),c?$(a).addClass("unfold").removeClass("fold"):$(a).removeClass("unfold").addClass("fold"),void 0)}function d(a,b){if(!b||!a||""==b)return!1;if($.isArray(a)){if(b>=a[0]&&b<=a[1])return!0}else if(b>=a)return!0;return!1}var e=a("base"),f=a("price"),g=a("vali"),h=a("ui.cover"),i=function(){var a=$(".s_pack_goods"),b=0,c=0,d=!1,f=!1;return a.each(function(){var a=$(this).find("input[type=checkbox]");a.attr("mainflag")&&(d=!0),a.attr("mainflag")&&a.is(":checked")&&(f=!0)}),a.each(function(){var a=$(this).find("input[type=checkbox]").is(":checked");a&&(d?f?(b+=e.math.float($(this).attr("sale-price")),c+=e.math.float($(this).attr("old-price"))-e.math.float($(this).attr("sale-price"))):b+=e.math.float($(this).attr("old-price")):(b+=e.math.float($(this).attr("sale-price")),c+=e.math.float($(this).attr("old-price"))-e.math.float($(this).attr("sale-price"))))}),{total:e.math.float(b),save:e.math.float(c)}};b.combo=i;var j=function(){var a=e.math.float($(".s-final_price").attr("price"));f.update($("#combo_price"),a+i().total)};b.getSales=function(a,b,c){b=e.math.float(b);var h=$.parseJSON(a),i=e.math.float($(c).val());e.math.float($("#s-price").val());var l=$("#instockNum"),m=e.math.float($.trim(l.text()));""!==$.trim(l.text())&&!isNaN(m)&&i>m&&($(c).val(m),i=m),1>i&&(i=1),_params.knum&&1!=_params.knum&&$("#s-knum_tips")[i<_params.knum?"fadeIn":"fadeOut"](200);var n=b,o=$(".s-final_price"),p=!1;if($(".s_pack_goods").each(function(){var a=$(this).find('input[type="checkbox"]');a.attr("mainflag")&&a.is(":checked")&&(p=!0,n=$("#s-price").attr("price"))}),1===i||!h||$.isEmptyObject(h))f.update(o,i*(e.math.float(n)+k.price.fee())),f.update($(".product_price"),n),$("#s-price").data("changed",!1);else if(i>1&&h&&!$.isEmptyObject(h)){for(var q=n,r=0;r<h.length;r++){var s=h[r],t=-1===s.salenum2?s.salenum1:[s.salenum1,s.salenum2];if(d(t,i)){q=s.saleprice,f.update($(".product_price"),q);break}}var u=i*(e.math.float(q)+k.price.fee());f.update(o,u),$("#s-price").data("changed",!0)}g.lockedProductSubmit(!0),j()};var k=b.ptailor={_custom_size_inrange:!0,custom_type:0,price:{gift:function(){var a=0;return $(".s-gift_handler").each(function(){$(this).is(":checked")&&(a+=e.math.float($(this).attr("price")))}),a},def:function(){return e.math.float($("#s-price").val())},num:function(){return e.math.float($("#proqty").val())},fee:function(){return k.price.custom.get()+k.price.hole.get()},feeView:function(){return k.price.custom.get(-1)+k.price.hole.get()},custom:{set:function(a,b){this.price=e.math.float(a),this.list=b},get:function(){var a=this.price||0;if($("#custom-price").length&&(a+=e.math.float($("#custom-price").val())),-1==arguments[0])return a;if(0==k.custom_type)return 0;var b=k.checkInput(this.list);return b?a:0}},hole:{set:function(a){this.inputs=a},checkedLen:function(){var a=0;return this.inputs.is(":disabled")?0:(this.inputs.each(function(){$(this).is(":checked")&&a++}),a)},get:function(){var a=0;return this.inputs.each(function(){!$(this).is(":disabled")&&$(this).is(":checked")&&(a+=e.math.float($(this).attr("price")))}),e.math.float(a)},enabled:function(){this.inputs.removeAttr("disabled")},disabled:function(){this.inputs.attr("disabled","disabled")}}},setData:function(a){var b=$("#s-size").find("select"),c=$("#s-pri_cussize").find("input[type=text], input[type=radio]");if(this.select_type=a,b.length||c.length){if(void 0===a){var d=this.checkSelect(b),e=this.checkInput(c);d&&(this.custom_type=0),e&&(this.custom_type=1)}else this.custom_type=a;$("#s-custom_type").val(this.custom_type)}else this.custom_type=1,$("#s-custom_type").val(1);0==this.custom_type?$("#s-custom_key").attr("disabled","disabled"):$("#s-custom_key").removeAttr("disabled")},switchType:function(){function a(a,b){c.price.custom.set(a,b),e.math.float($("#s-price").val()),e.math.float($.trim($("#proqty").val())),f.update($(".s-fee_price_view"),c.price.fee())}var b=arguments,c=this,d=b[0],g=b[1],h=b[2];b[3],$(d).each(function(){this!==$(h)[0]&&$(this).hide()}),$(d).find(g).click(function(){var b=$(this).attr("href"),e=$(this).attr("price"),g=$(this).attr("type"),h=0==g?$(b).find("select"):$(b).find("input[type=text], input[type=radio]");return a(e,h),$(d).hide(),$(b).show(),0==g?(c.DisabledInput(),$("#s-ptailor").find(".skusize").removeAttr("disabled").removeClass("disabled")):(c.EnabledInput(),$("#s-ptailor").find(".skusize").attr("disabled","disabled").addClass("disabled")),c.setData(),c.submitSet(h),f.update($(".s-fee_price_view"),c.price.feeView()),!1})},popper:function(){var a=arguments,b=this,c=a[0],d=a[1],e=a[2];/cart/.test(k.page)?$(c).change(function(){$(this).is(":checked")?(k.custom_type=1,b.EnabledInput(),b.DisabledSelect(),b.price.hole.enabled(),$("#s-ptailor").show(),$(".skusize").addClass("disabled").attr("disabled","disabled")):(k.custom_type=0,b.DisabledInput(),b.EnabledSelect(),$("#s-ptailor").hide(),$(".skusize").removeAttr("disabled").removeClass("disabled"));var a=(k.price.def()+k.price.fee())*k.price.num();f.update($(".s-final_price"),a),f.update($("#increase_price"),k.price.fee()*k.price.num())}):$(c).change(function(){b.custom_type,$(this).is(":checked")?(b.EnabledInput(),b.EnabledSelect(),b.price.hole.enabled(),$(d).click(),$(this).removeAttr("checked")):(b.DisabledInput(),b.DisabledSelect(),$(e).click())})},bind:function(){var a=arguments,b=this,d=a[0],g=a[1],h=a[2],i=a[3],l=a[4];/cart/.test(k.page)||($(i).click(function(){b.autoChoose()}),$(d).bind("click",function(){var a=$("#s-pri_cussize").find("input[type=text], input[type=radio]");return $.fancybox.close(),b.price.hole.enabled(),b.setData(),0==b.custom_type?(b.DisabledInput(),b.EnabledSelect(),$(h).removeAttr("checked"),$(i).hide()):a.length&&(b.DisabledSelect(),$(".selected_"+$("select.skusize").attr("sku:type")).html("<a onclick='jQuery( \"#s-ptailor_edit\" ).triggerHandler( \"click\" )' href='javascript:void(0);'>"+$("#s-ptailor_checkbox").next().text()+"</a>"),$("#selected_"+$("select.skusize").attr("sku:type")+"_box").fadeIn(100)),(0!=b.custom_type||0!=b.price.hole.checkedLen())&&($(h).attr("checked","checked"),$(i).show()),f.update($(l),b.price.fee()),f.update($(".s-final_price"),(b.price.fee()+e.math.float($("#s-price").val()))*e.math.float($("#proqty").val())),j(),!1}),$(g).bind("click",function(){$.fancybox.close(),b.price.hole.disabled(),b.DisabledInput(),b.EnabledSelect(),b.setData(0),c(-1),$(h).removeAttr("checked"),$(i).hide();var a=b.price.fee();$("#custom-price").length&&(a+=e.math.float($("#custom-price").val())),f.update($(l),a),f.update($(".s-final_price"),(b.price.fee()+e.math.float($("#s-price").val()))*e.math.float($("#proqty").val())),j();var d=$("select.skusize").eq(0).find("option:selected"),g="please"==d.val()?"-/-":d.text();return $(".selected_"+$("select.skusize").attr("sku:type")).html(g),!1}))},autoChoose:function(){var a=$("#s-size").find("select"),b=a.find("option:selected"),c=!$("#s-pri_dighole")||!$("#s-pri_dighole").length;c?a.is(":disabled")||"please"===b.val()?$("#s-size").find(".s-size_choose").triggerHandler("click"):$("#s-pri_cussize").find(".s-size_choose").triggerHandler("click"):a.is(":disabled")?$("#s-size").find(".s-size_choose").triggerHandler("click"):$("#s-pri_cussize").find(".s-size_choose").triggerHandler("click")},dighole:function(){var a=arguments,b=a[0],c=this,d=$(".s-final_price");$("#packagePrice"),$("#increase_price");var g=$(b).find("input[type=checkbox]");this.price.hole.set(g),g.click(function(){var a=(e.math.float(d.attr("price")),$(this).is(":checked"));e.math.float($(this).attr("price"))*(a?1:-1),f.update($(".s-fee_price_view"),c.price.feeView())})},cussize:function(){var a=arguments,b=a[0],c=a[1],d=this,e=$(b).find("select"),f=$(c).find("input[type=text], input[type=radio]");f.bind("keyup.cussize,change.cussize",function(){return d.submitSet(f),!1}),e.bind("change.cussize",function(){return d.submitSet(e),!1}),this.submitSet()},checkInput:function(a){if(!a||!a.length)return!0;var b=0,c=!0;return a.is(":disabled")?!1:(a.each(function(){""==$.trim($(this).val())&&(c=!1),$(this).is(":radio")&&!$(this).is(":checked")&&b++}),2==b&&(c=!1),c&&this._custom_size_inrange)},DisabledInput:function(){var a=$("#s-pri_cussize").find("input[type=text], input[type=radio]");a.attr("disabled","disabled")},EnabledInput:function(){var a=$("#s-pri_cussize").find("input[type=text], input[type=radio]");a.removeAttr("disabled")},checkSelect:function(a){var b=!0;return a&&a.length?a.is(":disabled")?!1:(a.each(function(){var a=$(this).find("option");if(1==a.length);else{var c=$(this).find("option:selected");b=0==c.index()?!1:!0}}),b):!0},DisabledSelect:function(){$(".skusize").addClass("model_disabled").attr("disabled","disabled")},EnabledSelect:function(){$(".skusize").removeAttr("disabled").removeClass("model_disabled")},submitSet:function(a){function b(a){a?c.removeAttr("disabled").removeClass("disabled"):c.addClass("disabled").attr("disabled","disabled")}if(!$(".left_con").length)return!1;var c=$(".apply_but");return a&&a.length?(b(this[a.is("select")?"checkSelect":"checkInput"](a)),void 0):(c.addClass("disabled").attr("disabled","disabled"),void 0)},inrange:function(a,b,c){function d(a,c){g._custom_size_inrange=!0,$(c).each(function(){if($(this).is(":text")){var a=$.trim($(b).filter(":checked").val()),c=e.math.float($.trim($(this).val())),d=$.trim($(this).attr(a));if(d&&""!=d&&!isNaN(c)){var f=!1,h=d.split(","),i=e.math.float(h[0]),j=e.math.float(h[1]);i&&!isNaN(i)&&i>c&&(f=!0,g._custom_size_inrange=!1),j&&!isNaN(j)&&c>j&&(f=!0,g._custom_size_inrange=!1);var k=$(this).parent(),l="cm"==$(b).filter(":checked").val()?".tips1":".tips2",m=k.find(l);k.find(".tips1, .tips2").hide(),m[f?"show":"hide"]()}}})}var f=arguments,a=f[0],b=f[1],g=(f[2],this),h=$(a).find("input[type=text], input[type=radio]"),i=$(b).filter(":checked").val();h.bind("keyup.inrange, change.inrange",function(){d(h,this),g.submitSet(h)}),$(b).bind("change.inrange",function(){$("label.custom_unit").text($(this).val()),$("label.custom_unit_kg").text($(this).attr("aunit")),g.unitSwitch($(a),i,b),i=$(this).val(),d(h,this)})},unitSwitch:function(a,b,c){function d(a,b){b=Math.round(b*Math.pow(10,1))/Math.pow(10,1),$(a).val(b)}var e={1:2.54,2:.45359237},f=$(a).find("input[type=text]");b!=$(c).filter(":checked").val()&&f.each(function(){var a=$.trim($(this).val()),c=$.trim($(this).attr("units"));""!==a&&void 0!=c&&""!=c&&("in"==b?a*=e[c]:a/=e[c],d(this,a))})}};b.apfunc=function(a){function b(a){var b=!0,c=$(a).parents(".se_color_size");$(a).each(function(){""==$.trim($(this).find("option:selected").val())&&(b=!1)}),b?c.find(".select_but").removeClass("disabled").removeAttr("disabled"):c.find(".select_but").addClass("disabled").attr("disabled","disabled")}function c(){var a=[],b=$("#combo_price"),c=$("#combo_price_save"),d=(k.price.fee()+k.price.def())*k.price.num()+k.price.gift()+i().total;f.update(b,e.math.float(d)),f.update(c,i().save);var g=!1,h=!1;j.each(function(){var a=$(this).find("input[type=checkbox]");a.attr("mainflag")&&(g=!0),a.attr("mainflag")&&a.is(":checked")&&(h=!0)}),j.each(function(){var b=$(this.checkbox).is(":checked");if(b&&a.push($(this.checkbox).attr("id").replace("ap_","")),g){var c=h?$(this).attr("sale-price"):$(this).attr("old-price");f.update($(this).find(".goods_price"),c)}}),m.val(a.join(","))}function d(a){a.submitBtn.addClass("disabled").attr("disabled","disabled"),a.checkbox.removeAttr("checked"),h.close(),a.checkbox.attr("mainflag")&&(gvs.ap_use_oldprice=!0),c(a),$(a).find(".goods_price").removeClass("selected")}var j=a,l=!1,m=$("#addition_products_id_array");$(".goods_price").click(function(){var a=$(this).parents(".s_pack_goods"),e=a.find(".se_color_size");$(this).hasClass("selected")?d(a[0]):e.length?(b(a.find("select.adtype")),h.open(e,{coverOn:$("#s_combo_box")})):(a.find('input[type="checkbox"]').attr("checked","checked"),$(a).find(".goods_price").addClass("selected"),c(a),g.submitPackage())}),j.each(function(){var a=this;this.checkbox=$(this).find("input[type=checkbox]"),this.poper=$(this).find(".se_color_size"),this.submitBtn=this.poper.find(".select_but"),this.cancelBtn=this.poper.find(".cancel_but"),this.closeBtn=this.poper.find(".closebtn"),this.selectElem=this.poper.find("select.adtype"),this.newprice=$(this).attr("sale-price"),this.oldprice=$(this).attr("old-price"),this.checkbox.attr("mainflag")&&(l=!0),this.selectElem.change(function(){b(a.selectElem)}),this.submitBtn.click(function(b){return b.preventDefault(),a.submitBtn.hasClass("disabled")?!1:(a.checkbox.attr("checked","checked"),$(a).find(".goods_price").addClass("selected"),h.close(),c(a),g.submitPackage(),void 0)}),this.cancelBtn.click(function(){d(a)}),this.closeBtn.click(function(){a.poper.hide()})})}}),define("vali",function(a,b){var c=a("base"),d=a("price");b.lockedProductSubmit=function(a){if(!b.checkKnum())return!0;var c=!1,d=$("#s-ptailor_checkbox"),e=$(".pro_choose"),f=$(".tips_product_locked"),g=function(){e.find("select.skuLinkage").each(function(){if(!$(this).is(":disabled")){var a=$(this).find("option:selected");(""===$.trim($(this).val())||a&&a.hasClass("no_stock"))&&(c=!0)}})};e.find("input.required").each(function(){""==$.trim($(this).val())&&(c=!0)}),$("#s-only_custom")&&$("#s-only_custom").length?(e.find("input[type=radio]").length&&!e.find("input[type=radio]:checked").length&&(c=!0),e.find("input.required").each(function(){""===$.trim($(this).val())&&(c=!0)})):(d&&d.length&&e.find(".skusize").is(":disabled")&&(c=d.is(":checked")?!1:!0),g());var h=$("#s-only_custom");return h&&h.length&&("other"==h.attr("propertyType")||_params.size_count<1)&&g(),e.find(".tips1, .tips2").each(function(){$(this).is(":hidden")||(c=!0)}),$(".img-upload-button").length!=$(".img-upload-disabled").length&&(c=!0),a||f[c?"fadeIn":"fadeOut"](),c},b.checkKnum=function(){var a=!0,b=parseInt($("#proqty").val());return _params.knum&&1!=_params.knum&&(b<_params.knum?(a=!1,$("#s-knum_tips").fadeIn(100)):(a=!0,$("#s-knum_tips").fadeOut(100))),a},b.submitPackage=function(){return $(".s_pack_goods").find("input[type=checkbox]:checked").length?($("#package_error_tips").fadeOut(100),!0):($("#package_error_tips").fadeIn(100),!1)},b.getSkuInfo=function(a,b,e){var f=$(a).parent().attr("sku:type"),g=$("#selected_"+f+"_Baseox"),h=$(".selected_"+f);if(h&&h.length){var i=$(a).attr("property"),j='<span class="sizeinfo">'+$(a).text()+"</span>";i&&(j+='<span class="proinfo">'+i+"</span>"),h.html(j),""!==$.trim($(a).val())&&g.fadeIn(),tips.is(":hidden")||lockedProductSubmit()||tips.fadeOut()}var k=$("#instock"),l=$("#instockNum"),m=$("#proqty");if(e){if(-1==b)return k.hide(),!1;if(k[b?"show":"hide"](),b){l.text(b).show();var n=c.math.float($.trim(m.val()));if(n>b){m.val(b);var o=c.math.float($(".final_price").attr("price")),p=c.math.float($("#packagePrice").attr("price")),q=c.math.float($.trim($("#s-price").val()));$(".final_price").attr("price",c.math.float(o-q*(n-b))),$("#packagePrice").attr("price",c.math.float(p-q*(n-b))),$(".final_price").find(".smt_price").text(d.byState($(".final_price").attr("price"))),$("#packagePrice").find(".smt_price").text(d.byState($("#packagePrice").attr("price")))}}else l.hide().empty()}""===$.trim($(a).parent().val())&&h.html("-/-")},b.checkCartPtailor=function(){var a=!0;return $("#s-ptailor_checkbox").is(":checked")?($("#s-ptailor").find("input[type=text]").each(function(){""==$.trim($(this).val())&&(a=!1)}),$(".tips_product_locked")[a?"fadeOut":"fadeIn"](),a):!0}}),define("price",function(a){var b=a("base"),c={};c.update=function(a,c){var e=$(a);e.attr("price")||e.attr("price",0);var f=b.math.float(c)+"",g=f.split("."),h="00";if(g.length)for(var h=g[g.length-1],i=0;i<2-h.length;i++)h+="0";c=g[0]+"."+h,e.attr("price",b.math.float(c));var j=d(c);e.find(".smt_price").text(j)};var d=function(a){if(void 0===a)return a;a+="";var c=a.split("."),d=c.length?c[0]:a,e=b.chars.strcut(d,3,-1),f=".";if((/ru/.test(gvs.langcode)||"RUB"==gvs.currencycode)&&(f=" "),gvs.isrp){/es/.test(gvs.langcode)&&e.join("").length<5&&(f="");var g=e.join(f)+(c.length&&c[1]?","+c[1]:"");return"USD"==gvs.currencycode&&(g=e.join(",")+(c.length&&c[1]?"."+c[1]:"")),"USD"!=gvs.currencycode&&"RUB"!=gvs.currencycode&&(f=",",g=e.join(".")+(c.length&&c[1]?f+c[1]:"")),"JPY"==gvs.currencycode&&(f="，",g=e.join("，")+(c.length&&c[1]?f+c[1]:"")),e.join("").length<4&&c.length&&c.length<2&&(/,/.test(g)||(g+=",00")),g+=""}if(gvs.isjp)var g=e.join("，")+(c.length&&c[1]?"."+c[1]:"");else{var g=e.join(",")+(c.length&&c[1]?f+c[1]:"");"USD"!=gvs.currencycode&&"RUB"!=gvs.currencycode&&(f=",",g=e.join(".")+(c.length&&c[1]?f+c[1]:""))}return"JPY"==gvs.currencycode&&(f="，",g=e.join("，")+(c.length&&c[1]?f+c[1]:"")),e[1]&&e.join("").length<4&&c.length&&c.length<2&&(/\./.test(g)||(g+=".00")),g+=""};return c}),define("ui.cover",function(){var a={},b={cover:null,main:null,content:null,items:null,close:null},c={pos:null,elem:null};a.open=function(a,e){var f={coverOn:null},g=$(a);$.extend(f,e),$("#jc-cover-shadow").length||($("body").append('				<div id="jc-cover-shadow" class="jc-cover-items" style="display:none;"></div>				<div id="jc-cover-main" class="jc-cover-items" style="display:none;">					<div id="jc-cover-close"></div>					<div id="jc-cover-content"></div>				</div>				'),b.cover=$("#jc-cover-shadow"),b.main=$("#jc-cover-main"),b.content=$("#jc-cover-content"),b.close=$("#jc-cover-close"),b.items=$(".jc-cover-items"),b.close.click(function(){d()}),b.cover.click(function(){d()}));var h=null==f.coverOn?0:$(f.coverOn).offset().left,i=null==f.coverOn?0:$(f.coverOn).offset().top,j=null==f.coverOn?$(window).width():$(f.coverOn).outerWidth(),k=null==f.coverOn?$(window).height():$(f.coverOn).outerHeight();b.cover.css({width:j,height:k,left:h,top:i}),b.main.css({width:g.outerWidth(),height:g.outerHeight(),left:.5*(j-g.outerWidth())+h,top:.5*(k-g.outerHeight())+i}),c.pos=g.parent(),c.elem=g,b.content.html(g.show()),null==f.coverOn?($("body").css({height:k,overflow:"hidden"}),b.items.css("position","fixed")):b.items.css("position","absolute"),b.items.fadeIn(100)};var d=a.close=function(){b.items&&b.items.length&&($("body").css({height:"auto",overflow:"auto"}),b.items.fadeOut(100),c.pos.append(c.elem.hide()))};return a}),define(function(a){var b=(a("base"),a("main")),c=a("ui.form"),d=(a("vali"),a("jchecked"));$(function(){if(c.validateNumber(),$(".jchecked").each(function(){new d(this)}),b.ptailor.page="cart",b.ptailor.popper("#s-ptailor_checkbox"),b.ptailor.bind("#s-addtobag"),b.ptailor.dighole("#s-pri_dighole"),b.ptailor.cussize("#s-size","#s-pri_cussize"),b.ptailor.inrange("#s-ptailor",$(".costumer_units").find('input[type="radio"]'),!1),_params.pro_active){var e=a("vali");$("#s-addtobag").click(function(){return!e.lockedProductSubmit()&&e.checkKnum()&&e.checkCartPtailor()&&(c.submit.lock($("#s-addtobag")[0],_lang.loading),$("#cartform").submit()),!1})}})});